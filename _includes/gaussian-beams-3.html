<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="generator" content="pandoc">
      
      
      <title>PHYS 4430</title>
         </head>
   <body>
            <div>
         <style>
            .eqnos { display: inline-block; position: relative; width: 100%; }
            .eqnos br { display: none; }
            .eqnos-number { position: absolute; right: 0em; top: 50%; line-height: 0; }
         </style>
         <h1 class="title">Gaussian Beams - Week 3</h1>
                  <h1 class="title">Contents</h1>
        <nav id="TOC">
            <ul>
            <li><a href="#overview" id="toc-overview"><span
            class="toc-section-number">1</span> Overview</a></li>
            <li><a href="#goals" id="toc-goals"><span
            class="toc-section-number">2</span> Goals</a></li>
            <li><a href="#prelab" id="toc-prelab"><span
            class="toc-section-number">3</span> Prelab</a>
            <ul>
            <li><a
            href="#error-propagation---from-measured-to-derived-quantities"
            id="toc-error-propagation---from-measured-to-derived-quantities"><span
            class="toc-section-number">3.1</span> Error propagation -
            from measured to derived quantities</a></li>
            <li><a href="#error-propagation-in-mathematica"
            id="toc-error-propagation-in-mathematica"><span
            class="toc-section-number">3.2</span> Error propagation in
            Mathematica</a></li>
            <li><a href="#error-bars" id="toc-error-bars"><span
            class="toc-section-number">3.3</span> Error bars</a>
            <ul>
            <li><a href="#error-bars-in-mathematica"
            id="toc-error-bars-in-mathematica"><span
            class="toc-section-number">3.3.1</span> Error bars in
            Mathematica</a></li>
            <li><a href="#example-gaussian-laser-beam-width-measurement"
            id="toc-example-gaussian-laser-beam-width-measurement"><span
            class="toc-section-number">3.3.2</span> Example: Gaussian
            laser beam width measurement</a></li>
            </ul></li>
            </ul></li>
            <li><a href="#digital-sampling-of-data"
            id="toc-digital-sampling-of-data"><span
            class="toc-section-number">4</span> Digital Sampling of
            Data</a>
            <ul>
            <li><a href="#improving-the-usefulness-of-you-existing-vi"
            id="toc-improving-the-usefulness-of-you-existing-vi"><span
            class="toc-section-number">4.1</span> Improving the
            usefulness of you existing VI</a></li>
            <li><a href="#initial-measurements"
            id="toc-initial-measurements"><span
            class="toc-section-number">4.2</span> Initial
            measurements</a></li>
            <li><a href="#enhanced-understanding"
            id="toc-enhanced-understanding"><span
            class="toc-section-number">4.3</span> Enhanced
            understanding</a></li>
            <li><a href="#nyquist-frequency"
            id="toc-nyquist-frequency"><span
            class="toc-section-number">4.4</span> Nyquist
            frequency</a></li>
            </ul></li>
            <li><a href="#fourier-analysis-techniques"
            id="toc-fourier-analysis-techniques"><span
            class="toc-section-number">5</span> Fourier Analysis
            Techniques</a>
            <ul>
            <li><a href="#fourier-transforms"
            id="toc-fourier-transforms"><span
            class="toc-section-number">5.1</span> Fourier Transforms</a>
            <ul>
            <li><a href="#sec:basic-fourier"
            id="toc-sec:basic-fourier"><span
            class="toc-section-number">5.1.1</span> Basic Fourier
            concepts</a></li>
            </ul></li>
            <li><a href="#modifying-your-labview-vi"
            id="toc-modifying-your-labview-vi"><span
            class="toc-section-number">5.2</span> Modifying your LabVIEW
            VI</a>
            <ul>
            <li><a
            href="#setting-up-real-time-spectral-analysis-in-labview."
            id="toc-setting-up-real-time-spectral-analysis-in-labview."><span
            class="toc-section-number">5.2.1</span> Setting up real-time
            spectral analysis in LabVIEW.</a></li>
            </ul></li>
            <li><a href="#using-your-vi" id="toc-using-your-vi"><span
            class="toc-section-number">5.3</span> Using your VI</a>
            <ul>
            <li><a href="#spectral-analysis-basics"
            id="toc-spectral-analysis-basics"><span
            class="toc-section-number">5.3.1</span> Spectral analysis
            basics</a></li>
            <li><a
            href="#real-time-spectral-analysis-of-different-waveforms"
            id="toc-real-time-spectral-analysis-of-different-waveforms"><span
            class="toc-section-number">5.3.2</span> Real-time spectral
            analysis of different waveforms</a></li>
            </ul></li>
            <li><a href="#fourier-analysis-in-mathematica"
            id="toc-fourier-analysis-in-mathematica"><span
            class="toc-section-number">5.4</span> Fourier Analysis in
            Mathematica</a></li>
            </ul></li>
            </ul>
        </nav>
        <hr/>
         <h1 data-number="1" id="overview"><span
         class="header-section-number">1</span> Overview</h1>
         <p>The third week of the Gaussian Beams lab will be building
         upon the VI you created in the second week. We will focus on
         properly setting up the VI and using it to its full potential
         for data collection in future experiments. We will then add and
         use spectral analysis tools that will do the Fourier Transform
         for us in real time. This will allow us to quickly vary
         parameters and see how they affect the Fourier Transform. Be
         sure to document all of your work in your lab notebook (either
         by taking a photo or saving the data and plotting it in
         Mathematica).</p>
         <h1 data-number="2" id="goals"><span
         class="header-section-number">2</span> Goals</h1>
         <p>In the first part of this week’s lab, you will…</p>
         <ol type="1">
         <li>…extend your previously developed VI to add
         functionality.</li>
         <li>…be able to appropriately choose DAQ parameters like sample
         rate.</li>
         <li>…explain what the DAQ measures when the sample rate is
         chosen differently.</li>
         </ol>
         <p>The primary objectives of this second part pf this week’s
         lab are to gain a conceptual and computational knowledge
         Fourier Transforms. Many methods of calculating the Fourier
         Transform lie within programs you are already familiar with.
         LabVIEW can calculate a Fourier Transform of a wave in
         real-time. A dataset imported into a data analysis program like
         Mathematica can also calculate the Fourier Transform of
         imported data. This lab focuses on methods that have come up in
         many labs in this course and in professional research.</p>
         <p>You will gain and understanding of Fourier Transforms
         by…</p>
         <ol type="1">
         <li>…connecting mathematical formalism to basic concepts of
         Fourier Transforms</li>
         <li>…adding spectral analysis to a LabVIEW VI to compute
         Fourier Transforms in real time.</li>
         <li>…computing Fourier Transforms in data analysis software
         (Mathematica).</li>
         </ol>
         <h1 data-number="3" id="prelab"><span
         class="header-section-number">3</span> Prelab</h1>
         <p>This week’s prelab builds upon our exploration in
         measurement uncertainty from the previous two weeks. Here we
         will focus on error propagation and how to display data with
         these uncertainties.</p>
         <h2 data-number="3.1"
         id="error-propagation---from-measured-to-derived-quantities"><span
         class="header-section-number">3.1</span> Error propagation -
         from measured to derived quantities</h2>
         <p>The quantity of interest in an experiment is often derived
         from other measured quantities. An example is estimating the
         resistance of a circuit element from measurements of current
         and voltage, using Ohm’s law (<span
         class="math inline">\(R=V/I\)</span>) to convert our measured
         quantities (voltage and current) into a derived quantity
         (resistance).</p>
         <p>Error propagation comes in when we want to estimate the
         uncertainty in the derived quantity based on the uncertainties
         in the measured quantities. Keeping things general, suppose we
         want to derive a quantity <span
         class="math inline">\(z\)</span> from a set of measured
         quantities <span class="math inline">\(a,b,c, \ ... \
         \)</span>. The mathematical function which gives us <span
         class="math inline">\(z\)</span> is <span
         class="math inline">\(z=z(a,b,c, \ ... \ )\)</span>. In
         general, any fluctuation in the measured quantities <span
         class="math inline">\(a,b,c, \ ... \ \)</span> will cause a
         fluctuation in <span class="math inline">\(z\)</span> according
         to</p>
         <p><span class="math display">\[\delta z = \left(
         \frac{\partial z}{\partial a}\right)\delta a+\left(
         \frac{\partial z}{\partial b}\right)\delta b+\left(
         \frac{\partial z}{\partial c}\right)\delta c+ \
         ...\text{.}\quad\quad\]</span></p>
         <p>This equation comes straight from basic calculus. It’s like
         the first term in a Taylor series. It’s the linear
         approximation of <span class="math inline">\(z(a,b,c, \ ... \
         )\)</span> near <span class="math inline">\((a_0,b_0,c_0, \ ...
         \ )\)</span>. However, we don’t know the exact magnitude or
         sign of the fluctuations, rather we just can estimate the
         spread in <span class="math inline">\(\delta a, \delta b,
         \delta c, \ ... \ \)</span>, which we often use the standard
         deviations <span class="math inline">\(\sigma_a, \sigma_b,
         \sigma_c, \ ... \ \)</span> In this case, the propagated
         uncertainty in <span class="math inline">\(z\)</span> is:</p>
         <p><span class="math display">\[\sigma_z^2 = \left(
         \frac{\partial z}{\partial a}\right)^2\sigma_a^2+\left(
         \frac{\partial z}{\partial b}\right)^2\sigma_b^2+\left(
         \frac{\partial z}{\partial c}\right)^2\sigma_c^2+ \
         ...\text{.}\quad\quad\]</span></p>
         <p>There are standard equations provided in courses like the
         introductory physics lab for the error in the sum, difference,
         product, quotient. These are all easily derived from this
         general formula.</p>
         <h2 data-number="3.2"
         id="error-propagation-in-mathematica"><span
         class="header-section-number">3.2</span> Error propagation in
         Mathematica</h2>
         <p>So far we have explored the use of Mathematica for basic
         data analysis and plotting, but Mathematica also has powerful
         symbolic math capabilities. One example where this can be
         helpful is for complicated error propagation calculations. This
         <a
         href="../resources/Gaussian-Laser-Beams/Uncertainty_Propagation.nb">Mathematica
         notebook</a> can calculate the propagated variance in the
         derived quantity symbolically.</p>
         <div id="fig:error-prop-mathematica" class="fignos">
         <figure>
         <img
         src="../resources/Gaussian-Laser-Beams/error-prop-mathematica.png"
         style="width:20cm"
         alt="Figure 1: Example of Mathematica code for error propagation." />
         <figcaption aria-hidden="true"><span>Figure 1:</span> Example
         of Mathematica code for error propagation.</figcaption>
         </figure>
         </div>
         <p>In next week’s prelab, we will model a Gaussian beam’s width
         <span class="math inline">\(w(z)\)</span> as:</p>
         <p><span class="math display">\[w(z) =
         w_0\sqrt{1+\left(\frac{z-z_0}{\pi
         w_0^2/\lambda}\right)^2}\text{.}\]</span></p>
         <p>For the output beam of one of the lasers in the lab, a fit
         of beam width versus position gave the following fit
         parameters:</p>
         <p><span class="math display">\[z_0 = -0.03 \pm 0.04 \
         m\]</span></p>
         <p><span class="math display">\[w_0=(1.90 \pm 0.09)\times
         10^{-6} \ m\]</span></p>
         <p>The wavelength is given by <span
         class="math inline">\(\lambda = 632.8 \pm 0.1 \
         nm\)</span>.</p>
         <ol type="1">
         <li>Use Mathematica to estimate the uncertainty in the derived
         width <span class="math inline">\(w(z)\)</span> when <span
         class="math inline">\(z\)</span> is a distance of <span
         class="math inline">\(2.000 \pm 0.005 \ m\)</span> from the
         waist position. You will probably find it helpful to copy and
         modify the code given in the example Mathematica notebook.</li>
         </ol>
         <h2 data-number="3.3" id="error-bars"><span
         class="header-section-number">3.3</span> Error bars</h2>
         <p>The error bar is a graphical way to display the uncertainty
         in a measurement. In order to put error bars on a plot you must
         first estimate the error for each point. Anytime you include
         error bars in a plot you should explain how the uncertainty in
         each point was estimated (e.g., you “eyeballed” the
         uncertainty, or you sampled it <span
         class="math inline">\(N\)</span> times and took the standard
         deviation of the mean, etc.)</p>
         <h3 data-number="3.3.1" id="error-bars-in-mathematica"><span
         class="header-section-number">3.3.1</span> Error bars in
         Mathematica</h3>
         <p>Creating plots with error bars in Mathematica requires the
         use of the <code>ErrorBarPlots</code> package. Suppose you had
         estimated the uncertainty at every point in a width measurement
         of your Gaussian laser beam to be <span
         class="math inline">\(0.04 \ V\)</span>. This error was chosen
         to demonstrate the mechanics of making a plot with error bars,
         but the uncertainty in the actual data was probably smaller
         than this. Also, there is no reason to believe it was the same
         at low and high voltages. The data and uncertainty form a three
         column data set as seen in Table <a
         href="#tbl:example-data">1</a>.</p>
         <center>
         <div id="tbl:example-data" class="tablenos">
         <table id="tbl:example-data">
         <caption><span>Table 1:</span> Table of data with a fixed
         uncertainty used to illustrate creating plots with error bars
         built in to Mathematica. </caption>
         <colgroup>
         <col style="width: 35%" />
         <col style="width: 32%" />
         <col style="width: 32%" />
         </colgroup>
         <thead>
         <tr class="header">
         <th style="text-align: center;">Micrometer Position
         (inches)</th>
         <th style="text-align: center;">Photodetector Voltage (V)</th>
         <th style="text-align: center;">Estimated uncertainty (V)</th>
         </tr>
         </thead>
         <tbody>
         <tr class="odd">
         <td style="text-align: center;">0.410</td>
         <td style="text-align: center;">0.015</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">0.412</td>
         <td style="text-align: center;">0.016</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="odd">
         <td style="text-align: center;">0.414</td>
         <td style="text-align: center;">0.017</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">0.416</td>
         <td style="text-align: center;">0.026</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="odd">
         <td style="text-align: center;">0.418</td>
         <td style="text-align: center;">0.060</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">0.420</td>
         <td style="text-align: center;">0.176</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="odd">
         <td style="text-align: center;">0.422</td>
         <td style="text-align: center;">0.460</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">0.424</td>
         <td style="text-align: center;">0.849</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="odd">
         <td style="text-align: center;">0.426</td>
         <td style="text-align: center;">1.364</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">0.428</td>
         <td style="text-align: center;">1.971</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="odd">
         <td style="text-align: center;">0.430</td>
         <td style="text-align: center;">2.410</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">0.432</td>
         <td style="text-align: center;">2.703</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="odd">
         <td style="text-align: center;">0.434</td>
         <td style="text-align: center;">2.795</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">0.436</td>
         <td style="text-align: center;">2.861</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="odd">
         <td style="text-align: center;">0.438</td>
         <td style="text-align: center;">2.879</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">0.440</td>
         <td style="text-align: center;">2.884</td>
         <td style="text-align: center;">0.04</td>
         </tr>
         </tbody>
         </table>
         </div>
         </center>
         <p><br></p>
         <p>The Mathematica code for plotting with error bars will look
         something like this:</p>
         <pre><code>Needs[&quot;ErrorBarPlots`&quot;];
d = Import[“gaussian_data_with_errors.txt”, “TSV”]; 
dNew = Table[{ {d[[i,1]], d[[i,2]]}, ErrorBar[2*d[[i,3]]] }, {i,2,Length[d]}];
ErrorListPlot[dNew, FrameLabel-&gt;{&quot;Position, x (inches)&quot;, &quot;Photodetector output (V)&quot;}]</code></pre>
         <p>The first line loads the <code>ErrorBarPlots</code> package.
         The second line is important because the error bars have to be
         input in a certain format. The following table gives a
         comparison of plotting data with and without error bars in
         Mathematica.</p>
         <center>
         <div id="tbl:eb-comp" class="tablenos">
         <table id="tbl:eb-comp">
         <caption><span>Table 2:</span> Comparison of code for plotting
         with and without error bars in Mathematica. </caption>
         <colgroup>
         <col style="width: 47%" />
         <col style="width: 52%" />
         </colgroup>
         <thead>
         <tr class="header">
         <th style="text-align: center;">No error bars</th>
         <th style="text-align: center;">With error bars</th>
         </tr>
         </thead>
         <tbody>
         <tr class="odd">
         <td
         style="text-align: center;"><code>{% raw %}d = {{x1,y1}, {x2, y2}, ...} {% endraw %}</code></td>
         <td
         style="text-align: center;"><code>{% raw %}d = {{{x1, y1}, ErrorBar[e1]}, {{x2, y2}, ErrorBar[e2]}, ...}{% endraw %}</code></td>
         </tr>
         <tr class="even">
         <td style="text-align: center;">(built in function)</td>
         <td
         style="text-align: center;"><code>Needs["ErrorBarPlots`"];</code></td>
         </tr>
         <tr class="odd">
         <td style="text-align: center;"><code>ListPlot[d]</code></td>
         <td
         style="text-align: center;"><code>ErrorListPlot[d]</code></td>
         </tr>
         </tbody>
         </table>
         </div>
         </center>
         <p><br></p>
         <h3 data-number="3.3.2"
         id="example-gaussian-laser-beam-width-measurement"><span
         class="header-section-number">3.3.2</span> Example: Gaussian
         laser beam width measurement</h3>
         <p>Import <a
         href="../resources/Gaussian-Laser-Beams/gaussian_data_with_errors.txt">this
         data set</a> with the uncertainties into Mathematica. Use the
         <code>ErrorBarPlots</code> package to reproduce a plot like
         Figure <a href="#fig:gauss-example">2</a>.</p>
         <div id="fig:gauss-example" class="fignos">
         <figure>
         <img src="../resources/Gaussian-Laser-Beams/gauss-example.png"
         style="width:15cm"
         alt="Figure 2: Plot of the provided Gaussian Beam data showing error bars." />
         <figcaption aria-hidden="true"><span>Figure 2:</span> Plot of
         the provided Gaussian Beam data showing error
         bars.</figcaption>
         </figure>
         </div>
         <h1 data-number="4" id="digital-sampling-of-data"><span
         class="header-section-number">4</span> Digital Sampling of
         Data</h1>
         <h2 data-number="4.1"
         id="improving-the-usefulness-of-you-existing-vi"><span
         class="header-section-number">4.1</span> Improving the
         usefulness of you existing VI</h2>
         <ol type="1">
         <li>Modify the LabVIEW VI you created last week so that the
         <em>Number of Samples</em> and <em>Sample Rate</em> are now
         inputs on the front panel.</li>
         <li>Set up a function generator to produce a 1 kHz sine
         wave.</li>
         <li>Connect the function generator’s output to both the
         oscilloscope and the DAQ to record data.</li>
         </ol>
         <h2 data-number="4.2" id="initial-measurements"><span
         class="header-section-number">4.2</span> Initial
         measurements</h2>
         <ol type="1">
         <li>Set the sample rate in the LabVIEW VI to 500 samples per
         second and the number of samples such that it records 1 second
         of data.</li>
         <li>Record and plot a dataset with both the oscilloscope and
         the DAQ. Make sure that the time range on the oscilloscope is
         set such that it is on the same order as the data being
         recorded by the DAQ.</li>
         <li>Compare the two plots. What are the major differences
         between the two?</li>
         <li>Why might one or both of these plots be giving an incorrect
         result? Think about the wave you are measuring and the result
         you are getting. How do they relate?</li>
         </ol>
         <h2 data-number="4.3" id="enhanced-understanding"><span
         class="header-section-number">4.3</span> Enhanced
         understanding</h2>
         <p>This section will guide you to understanding of Nyquist’s
         theorem and a more appropriate sample rate for digital data
         collection using the DAQ and your VI.</p>
         <ol type="1">
         <li>Why do you think the data from the DAQ produced a wave of
         lower frequency?</li>
         <li>Adjust the sample rate in a way you think might provide a
         more accurate measurement of the wave. What do you think the
         measured waveform will look like this time?</li>
         <li>Take a dataset, record and plot it. Did it match your
         predictions?</li>
         <li>Now record another dataset with the function generator set
         to the same parameters but the sample rate set to 3000 samples
         per second and the number of samples set to record 1 second of
         data.</li>
         <li>Plot this new dataset. What is the frequency of the new
         dataset?</li>
         <li>What are the fundamental differences between the first,
         second, and third datasets?</li>
         </ol>
         <h2 data-number="4.4" id="nyquist-frequency"><span
         class="header-section-number">4.4</span> Nyquist frequency</h2>
         <p>The discrepancies between the sampled wave forms in sections
         above 4 can be explained by Nyquist’s theorem. It states that
         to accurately measure a signal by discrete sampling methods
         (like the DAQ) that the sampling rate must be at least twice
         that of the measured signal. If this were not the case, a
         measurement might not be taken at every interval of
         oscillation, a situation called “undersampling.” Sampling the
         signal at least twice as fast as the maximum frequency of
         interest ensures that at least two data points are recorded
         each period.</p>
         <p><strong>Definition:</strong></p>
         <p>The <em>Nyquist Frequency</em> is defined to be half the
         sample rate.</p>
         <ol type="1">
         <li><p><strong>Predict</strong> the <em>apparent</em> period
         (in Hz) of the signal recorded by the DAQ.
         <strong>Observe</strong> what really happens using your
         waveform generator, DAQ, and LabVIEW VI.
         <strong>Explain</strong> the result. Suppose the DAQ is set to
         1 kS/s sample rate in all of the cases, while the waveform
         generator is set to:</p>
         <ol type="1">
         <li>1000 Hz</li>
         <li>998 Hz</li>
         <li>1004 Hz</li>
         <li>1500 Hz</li>
         <li>2000 Hz</li>
         <li>1997 Hz</li>
         <li>2005 Hz</li>
         </ol>
         <p>In understanding what is going on, it may help to draw a few
         periods of the wave and then indicate where the DAQ will sample
         the wave form.</p></li>
         <li><p>You <em>want</em> to measure the random fluctuations
         (noise) in a signal from 0-100 Hz.</p>
         <ol type="1">
         <li>If you set the sample rate at 200 Hz, what set of frequency
         ranges will contribute to the noise measurement?</li>
         <li>If you set the sample rate at 1000 Hz, what set of
         frequency ranges will contribute to the noise measurement?</li>
         <li>How could you help achieve the desired measurement in 2.1
         using a combination of changing the sample rate and adding
         filtering? Explain why your choice of sample rate and signal
         filter would work better.</li>
         </ol></li>
         <li><p><strong>Undersampling on the oscilloscope.</strong>
         Undersampling is an issue with any device that samples data at
         regular discrete time intervals. This question requires the use
         of a Rigol DS1052E oscilloscope and a waveform generator.</p>
         <ol type="1">
         <li>Figure <a href="#fig:scope-menu">3</a> is copied from the
         Rigol Oscilloscope manual. The Horizontal menu allows you to
         view the actual sample rate “Sa Rate” of the digital
         acquisition on the scope.</li>
         <li>Predict what should you observe if you set the waveform
         generator to the same frequency as the sample rate? Try it out,
         compare with your prediction, and explain your
         observations.</li>
         <li>What happens if you change the oscilloscope time scale? Or
         change the waveform generator frequency slightly? Try to
         explain what you observe.</li>
         </ol></li>
         </ol>
         <div id="fig:scope-menu" class="fignos">
         <figure>
         <img src="../resources/Gaussian-Laser-Beams/scope-menu.png"
         style="width:20cm"
         alt="Figure 3: The horizontal menu on the Rigol DS1052E Oscilloscope." />
         <figcaption aria-hidden="true"><span>Figure 3:</span> The
         horizontal menu on the Rigol DS1052E Oscilloscope.</figcaption>
         </figure>
         </div>
         <h1 data-number="5" id="fourier-analysis-techniques"><span
         class="header-section-number">5</span> Fourier Analysis
         Techniques</h1>
         <h2 data-number="5.1" id="fourier-transforms"><span
         class="header-section-number">5.1</span> Fourier
         Transforms</h2>
         <p>The discrete Fourier Transform of a set of data <span
         class="math inline">\(\{y_0,y_1, ... , y_{N-1}\}\)</span> is
         given by</p>
         <p><span class="math display">\[Y_m=\displaystyle
         \sum_{n=0}^{N-1}y_n\cdot e^{-2\pi i \frac{m}{n}N}\]</span></p>
         <p>The basic idea is that a Fourier Transform decomposes the
         data into a set of different frequency components, so the
         amplitude of <span class="math inline">\(Y_m\)</span> tells you
         how much of your signal was formed by an oscillation at the
         <span class="math inline">\(m\)</span>-th frequency.</p>
         <h3 data-number="5.1.1" id="sec:basic-fourier"><span
         class="header-section-number">5.1.1</span> Basic Fourier
         concepts</h3>
         <ol type="1">
         <li>How do the units of the Fourier Transform array <span
         class="math inline">\(Y_m\)</span> relate to the units of the
         data <span class="math inline">\(y_n\)</span>?</li>
         <li>Does the data <span class="math inline">\(y_n\)</span> have
         to be taken at equally spaced intervals?</li>
         <li>Is it possible for two different sets of data to have the
         same Fourier Transform?</li>
         <li>If data set has <span class="math inline">\(N\)</span>
         elements, how long is the discrete Fourier Transform?</li>
         </ol>
         <h2 data-number="5.2" id="modifying-your-labview-vi"><span
         class="header-section-number">5.2</span> Modifying your LabVIEW
         VI</h2>
         <p>Now we want to modify the LabVIEW VI we have been developing
         to provide a real time spectral analysis. This tool computes
         the Fourier Transform and scales it automatically. To do this,
         in the block diagram in LabVIEW, right click to get the
         functions palette, select express, signal analysis, then select
         the spectral tool. Wire the input of this block to the output
         from the DAQ.</p>
         <p>The next thing we want to do is to make the VI function more
         like an oscilloscope and run in real time.</p>
         <h3 data-number="5.2.1"
         id="setting-up-real-time-spectral-analysis-in-labview."><span
         class="header-section-number">5.2.1</span> Setting up real-time
         spectral analysis in LabVIEW.</h3>
         <ol type="1">
         <li>Create a new VI or modify and old one to have the following
         functionality</li>
         <li>Set up a VI to take <span class="math inline">\(N\)</span>
         samples inside a loop (continuous acquisition).</li>
         <li>Have front panel inputs for the sample rate and number of
         samples.</li>
         <li>Performs a spectral analysis on the data using the
         “Spectral analysis assistant” during each loop.</li>
         <li>Has a stop button to end the loop.</li>
         <li>Saves the last data set acquired after pressing the stop
         button.</li>
         </ol>
         <h2 data-number="5.3" id="using-your-vi"><span
         class="header-section-number">5.3</span> Using your VI</h2>
         <p>This section will familiarize you with your VIs limitations
         as well as helping you to gain an understanding of how
         different parameters relate to the Fourier Transform and
         Fourier Space.</p>
         <h3 data-number="5.3.1" id="spectral-analysis-basics"><span
         class="header-section-number">5.3.1</span> Spectral analysis
         basics</h3>
         <ol type="1">
         <li>Use a waveform generator to output a waveform of your
         choice at a frequency in the tens of kHz range and view the
         output on the oscilloscope and the DAQ.</li>
         <li>Look at the spectral analysis in LabVIEW. How do the
         <strong>frequency resolution</strong> (frequency step size
         between data in the spectrum) and <strong>maximum
         frequency</strong> relate to the <strong>sample rate</strong>
         and <strong>number of samples</strong>? Try to find an
         algebraic relationship. (Hint: You may want to turn off the
         auto scale function on the charts axes and adjust the scale
         manually to see the clearest results)</li>
         <li>If the data is sampled for 2 seconds at 100 Hz sample rate,
         what frequency does the <span
         class="math inline">\(m\)</span>-th component of the Fourier
         Transform correspond to?</li>
         <li>How many points are shown in the spectral analysis plot?
         How does this compare to the number of points you expected in
         the Fourier transform (see Section <a
         href="#sec:basic-fourier">5.1.1</a>.4)? <strong>Note</strong>:
         The data acquired from the DAQ is always a sequence of real
         numbers <span class="math inline">\(\{y_n\}\)</span>. Under the
         condition that the signal is only real numbers, it can be
         proved that <span class="math inline">\(Y_m=Y_{N-M}^*\)</span>
         so <span class="math inline">\(|Y_M|=|Y_{N-m}|\)</span>,
         meaning the spectrum is symmetric about the <span
         class="math inline">\(N/2\)</span>-th data point, which
         corresponds to the Nyquist frequency. For this reason, LabVIEW
         by default only plots the first half of the Fourier spectrum up
         to the Nyquist frequency.</li>
         </ol>
         <h3 data-number="5.3.2"
         id="real-time-spectral-analysis-of-different-waveforms"><span
         class="header-section-number">5.3.2</span> Real-time spectral
         analysis of different waveforms</h3>
         <ol type="1">
         <li>How do you expect the spectrum of a sine wave to look? How
         should it change as you vary the amplitude and frequency on the
         waveform generator? Try it.</li>
         <li>How do you expect the spectrum of a square wave to look?
         How should it change as you vary the amplitude and frequency on
         the waveform generator? Try it.</li>
         </ol>
         <p>(Hint: you can look up or calculate the Fourier Series of a
         square wave to see if the observed amplitudes agree with the
         mathematical prediction.)</p>
         <h2 data-number="5.4"
         id="fourier-analysis-in-mathematica"><span
         class="header-section-number">5.4</span> Fourier Analysis in
         Mathematica</h2>
         <p>While it is convenient and quick to use LabVIEW’s built in
         spectral analysis tools, sometimes you may want to analyze data
         after it is saved or analyze data not generated in LabVIEW. In
         these situations, it is good to know how to use a tool like
         Mathematica or MATLAB to compute the Fourier Transform.</p>
         <p>The Mathematica function for taking discrete Fourier
         Transforms of data is <code>Fourier[data]</code>, where
         <code>data</code> is the 1D array of your signal values. Don’t
         include any time column when using <code>Fourier</code>. See
         the Mathematica help for examples.</p>
         <ol type="1">
         <li>Import into Mathematica any saved data set of a period
         function saved from the DAQ or the oscilloscope.</li>
         <li>Use the <code>Fourier</code> function to compute the
         discrete Fourier Transform of the signal (don’t take the
         Fourier Transform of the time column).
         <ol type="1">
         <li>Do you expect the <code>Fourier</code> output to be
         real-valued or complex-valued?</li>
         </ol></li>
         <li>Plot the output of the <code>Fourier</code> function. If
         the output is complex-valued, you want to plot
         <code>Abs[]</code> or <code>Abs[]^2</code>.
         <ol type="1">
         <li>What is the x-axis range and step-size in the plot?</li>
         <li>What frequency range and step size should be displayed on
         the x-axis? Answers to earlier questions might help this.</li>
         </ol></li>
         <li>In Mathematica, you manually have to add the frequency
         column to the data. LabVIEW does it automatically. Add a
         frequency column to the data set (perhaps using the
         <code>Table</code> function) so you create a plot of the
         spectrum vs. frequency.</li>
         <li>Does the spectral analysis you do in LabVIEW show the same
         spectrum at the same frequencies as you found in LabVIEW or
         that you expect from the settings on the waveform
         generator?</li>
         </ol>
         <p>There are multiple ways to define the discrete Fourier
         transform, so it is important to know how Mathematica
         calculates it so that you get agreement with other software
         programs that also can do spectral analysis.</p>
         <ol start="6" type="1">
         <li>According to the Mathematica help on the
         <code>Fourier</code> function, what does the option
         <code>FourierParameters-&gt;{a,b}</code> do (see the “More
         Information” section)?</li>
         </ol>
         <p>If you want the <code>Fourier</code> function to compute a
         Fourier Transform that agrees with MATLAB’s default settings,
         then set <code>FourierParameters-&gt;{-1,1}</code>.</p>
               </div>
            <!-- Mathjax -->
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script>

      </script>
   </body>
</html>
