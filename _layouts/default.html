<!DOCTYPE html>
<html>

  {% include head.html %}
  {% include analytics.html %}


  <body>
    <!-- Theme initialization (runs immediately to prevent flash) -->
    <script>
      (function() {
        var savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
          document.body.classList.add('dark-mode');
        }
      })();
    </script>

    {% include header.html %}

    <div class="container-fluid">
      <div class="row">
        {{ content }}
      </div>
    </div>
   
    <br>
    <br>
    <br>

    {% include footer.html %}

    <!-- Theme toggle functionality -->
    <script>
      function toggleTheme() {
        var isDark = document.body.classList.toggle('dark-mode');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      }

      // Keyboard shortcut: Ctrl/Cmd + Shift + D
      document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.code === 'KeyD') {
          e.preventDefault();
          toggleTheme();
        }
      });
    </script>

    <!-- Add copy buttons to code blocks -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Add copy buttons to all code blocks
        document.querySelectorAll('pre').forEach(function(pre) {
          // Create copy button
          var button = document.createElement('button');
          button.className = 'copy-button';
          button.textContent = 'Copy';

          button.addEventListener('click', function() {
            var code = pre.querySelector('code');
            var text = code ? code.textContent : pre.textContent;

            navigator.clipboard.writeText(text).then(function() {
              // Success feedback
              button.textContent = 'Copied!';
              button.classList.add('copied');

              setTimeout(function() {
                button.textContent = 'Copy';
                button.classList.remove('copied');
              }, 2000);
            }).catch(function(err) {
              // Fallback for older browsers
              var textarea = document.createElement('textarea');
              textarea.value = text;
              document.body.appendChild(textarea);
              textarea.select();
              document.execCommand('copy');
              document.body.removeChild(textarea);

              button.textContent = 'Copied!';
              button.classList.add('copied');
              setTimeout(function() {
                button.textContent = 'Copy';
                button.classList.remove('copied');
              }, 2000);
            });
          });

          pre.appendChild(button);
        });

        // Wrap tables in scrollable container for mobile
        document.querySelectorAll('table').forEach(function(table) {
          if (!table.parentElement.classList.contains('table-wrapper')) {
            var wrapper = document.createElement('div');
            wrapper.className = 'table-wrapper';
            table.parentNode.insertBefore(wrapper, table);
            wrapper.appendChild(table);
          }
        });
      });
    </script>

  </body>

</html>
